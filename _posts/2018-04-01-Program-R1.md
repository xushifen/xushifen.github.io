---
layout: post
title:  "R编程语言简介"
date:   2018-04-01 20:06:05
updated: 2019-08-30
categories: 编程入门
tags: R基础
excerpt: R语言通常用于数据科学领域，作为分析数据、可视化数据的一门编程语言。随着大数据时代的来临，它已经由只有统计学家使用的小众语言上升到数据分析领域的通用语言。它与python相比，更适合与统计类型分析的领域。本文章主要介绍R语言的起源、软件安装以及包安装管理等。
---

### R起源

R语言是S语言的一分支，由贝尔实验室的RickBecker，JohnChambers和AllanWilks开发的S语言的一种实现。

#### R特点

R作为用来数据探索、统计分析和作图解释型语言。它可以运行在多个操作系统平台，主要有以下特点：

1. R是完全免费且开源的软件，其本身托管在[GitHub_R](https://github.com/topics/r)。可以下载任何有关的安装程序、源代码、程序包以及其源代码、文档资料等。

> R is a free programming language and software environment for statistical computing and graphics. R has a wide variety of statistical linear and non-linear modeling and provides numerous graphical techniques.

2. R是一种可编程的语言。语法通俗易懂，入门很简单；除此之外，还可以编制函数，因此它的包更新速度比一般统计软件要快得多。
3. 所有R的函数和数据集是保存在程序包里面的。
4. R具有很强互动性，是一门交互式语言。它的图形窗口极其方便开发者交互使用。
5. R能与其他编程语言、数据库等有很好的接口。
6. R拥有强大的数据分析工具包，方便统计分析，而且网上有着丰富的学习资源。



### R软件安装和编辑器RStudio

1. R软件和Rstudio编辑器的组合使用，对R的使用者来说是特别友好般的存在，这一点可以说打败很多编程软件及其编辑器组合（比如Java和eclipse）


- R软件是编译R脚本的工具，[R介绍](https://www.r-project.org/)网址包含R几乎所有的信息，点击[CRAN](https://cran.r-project.org/mirrors.html)进入下载镜像网址；一般使用清华大学的镜像[下载网址](https://mirrors.tuna.tsinghua.edu.cn/CRAN/)；可以根据自己需求下载R的各种版本。

> The R Project for Statistical Computing

- [Rstudio](https://www.rstudio.com/)是编辑R脚本的最佳工具，没有之一。它几乎满足了统计类型的编程者所有要求，而且它还在不断的更新，推出更多的更有用的功能版本。

> RStudio is an active member of the R community. We believe free and open source data analysis software is a foundation for innovative and important work in science, education, and industry. The many customers who value our professional software capabilities help us contribute to this community

2. R和Rstudio的安装 

- 使用[anaconda3](https://anaconda.org/)安装R是最方便简单的办法，不仅仅对windows适用而且对Linux系统也适用的，而且anaconda对管理R的包是最佳的。（在Linux系统中，安装R会需要安装很多依赖包如gcc等，而且存在包依赖包的问题，还有版本不兼容问题，因此极力推荐使用anaconda管理R）



### R包的安装

#### 1. 基本安装，直接从R的[CRAN](https://mirrors.tuna.tsinghua.edu.cn/CRAN/)下载

```R
install.packages("ggpplot2", dependencies=T, repos="https://mirrors.tuna.tsinghua.edu.cn/CRAN")
```

* dependencies : 该参数可以安装除ggplot2以外的依赖包
* repos : 指定ggplot2的包源的CRAN地址（*清华大学*的CRAN在国内是最好的）



#### 2. github安装，因为有些第三方包是github开发者开发且没有提交到CRAN上 

**2.1** 安装githubinstall包，该包可以通过第一步的基本安装实现
```R
install.packages("githubinstall")   ## 已经发布到CRAN
```
**2.2** 安装AnomalyDetection包

```R
library(githubinstall)
githubinstall("AnomalyDetection", ref="master")
```
**2.3** 使用devtools包安装
```R
install.packages("devtools")
library(devtools)
install_github("lch14forever/microbiomeViz")
```

#### 3. 基于[bioconductor](https://www.bioconductor.org/)安装

```R
source("http://bioconductor.org/biocLite.R")
options(BioC_mirror="http://mirrors.ustc.edu.cn/bioc/") # 选用中科大的bioconductor镜像
library(BiocInstaller)
biocLite("DirichletMultinomial")
```

- source函数会读取biocLite.R脚本，该脚本拥有很多函数，比如biocLite安装包函数
- [网址错误](https://support.bioconductor.org/p/74540/)； https和http的区别



#### 4. 本地安装.zip压缩等文件

```R
install.packages("E:/ggplot2/ggplot2*.zip")   ## 引号为绝对路径
```



### R包管理和查看

#### 1. **加载包的两种方式，library和require**

```R
> library(ggplot2)
> require(ggplot2)

## test 
> test <- library("abc")
Error in library("abc") : there is no package called 'abc'
> test
Error: object 'test' not found
> test <- require("abc")
Loading required package: abc
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
  there is no package called 'abc'
> test
[1] FALSE
```

- **区别**：当不存在R包时候，library直接输出报错信息并且终止程序运行，而require输出是警告且继续运行加载包后的程序。[详细信息](https://stackoverflow.com/questions/5595512/what-is-the-difference-between-require-and-library)



#### 2. **查看R包**

```R
1. getOption("defaultPackages")    ## 查看默认加载的包
2. installed.packages()       ## 查看所有已经安装的R包，包含版本信息等
3. .packages(all.available = T) ## 查看所有已经安装的R包，只有包的名字
```



#### 3. 更新和卸载包

**3.1** [更新包](https://www.rdocumentation.org/packages/utils/versions/3.4.3/topics/update.packages)

```R
>old.packages()
      Package LibPath                              Installed Built   ReposVer
RUnit "RUnit" "E:/software/anaconda/Lib/R/library" "0.4.26"  "3.3.1" "0.4.31"
      Repository                                                  
RUnit "https://mran.microsoft.com/snapshot/2017-09-01/src/contrib"

>update.packages()
RUnit :
 Version 0.4.26 installed in E:/software/anaconda/Lib/R/library 
 Version 0.4.31 available at https://mran.microsoft.com/snapshot/2017-09-01

>new.packages()
   [1] "A3"                          "abbyyR"                      "abc"                         "abc.data"                   
   [5] "ABC.RAP"                     "ABCanalysis"                 "abcdeFBA"                    #"ABCoptim"
```

- old.packages表示软件包在CRAN上具有（合适的）更高版本，而update.packages提供下载和安装此类软件包。
- new.packages将在尚未安装的存储库上查找（合适的）软件包，并可选择提供它们进行安装。



**3.2** 卸载包

```R
1. remove.packages(pkgs, lib)  ## 移除包
2. detach("package:pkgs")      ## 把包移除当前运行环境
```
- lib: 指明卸载包安装目录. 如果缺失，则默认是 `.libPaths()`目录。



#### 4. 升级R，但不重装packages

**拷贝R旧版本的library目录文件夹至新版本library目录下，再使用如下命令更新**

```R
update.packages(checkBuilt = T, ask = F)
# or install.packages(.packages(all = T))
```

### 设置共同的R library

在实际需求中，我们可能会使用到多个R版本，每个R版本存在不同的library。每次从某个版本切换到另一个版本，需要迁移大量的R包。为了实现方便快速使用R，我们通过设置共同的R library为所有的R版本提供最近解决方案，具体实现如下。

```markdown
1. 先建立一个共同的目录 **Rlibrary**;

2. 打开R或者Rstudio，在控制台输入**.libPaths("dir/Rlibrary")**;

3. 为了永久设置该路径，需要在环境变量添加**R_LIBS_USER**变量-->**dir/Rlibrary**。
```





### 引用

1. [R基础入门教程](https://blog.csdn.net/Ying_Xu/article/details/50896310)
2. [R语言百度百科](https://baike.baidu.com/item/R%E8%AF%AD%E8%A8%80)
3. [153分钟学会R](https://cran.r-project.org/doc/contrib/Liu-FAQ.pdf)



参考文章如引起任何侵权问题，可以与我[联系](https://github.com/HuaZou/)，谢谢。

