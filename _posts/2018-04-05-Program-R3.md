---
layout: post
title:  "R语言数据结构基础"
date:   2018-04-05 19:00:00
updated: 2019-08-30
categories: 编程入门
tags: R基础
excerpt: 了解编程语言第一步应该是知道该语言的数据结构是什么，这些数据结构构成了整个编程语言的组件。R语言的数据结构相对而言比较简单，有向量、矩阵、列表、数据框等。
---




### R语言数据对象类型简介
![](https://raw.githubusercontent.com/HuaZou/HuaZou.github.io/master/_posts/img/R.introduction.png)

#### **向量**[vector]

##### 向量基本概念

1). 向量构成的基本元素为：数值（numeric）、字符（character）、逻辑值（logical）、复数型
   （complex）；
2). 向量不需要定义类型，可直接赋值：
   - 生成一个空向量；x<-c();
   - 给向量赋值。x<-c(0,1,2,3);
       3). 向量的元素下标取值是以1开始。
         4). 如果一个向量中有一个字符，则该向量的类型会变成字符

```R
> tmp <- c(1, 2, "a")
> mode(tmp)
# "character"
```

5). 如果逻辑变量与数值在一起，则为转换成数值。TRUE 转变成1 而FALSE 转变成 0

```R
> tmp2 <- c(1,2,TRUE)
> mode(tmp2)
# "numeric"
> tmp2
## 1 2 1
```
6). 在 R 语言中没有单一的整数、单一字符的概念。只有向量的概念，可能向量只包含单一值，因此产生误解。

7). 给向量元素命名：names(x)

```R
> names(tmp) <- c("a", "b", "c")
> tmp
# a b c
# 1 2 a
```

8). 生成系列； 

```R
1. seq(length=, from=, to=)
2. seq(n1, n2, by=) 
3. rep(m, n) 
```
* Length：指定生成个数
* From：是指开始生成的点
* To：截止点
* n1：开始位置
* n2：结束位置
* by： 间隔
* m：数值m
* n：生成n次

##### 向量运算

1). 取子向量
  * 下标： x[2]；x[c(1:3)]；
  * 利用 -： x[-2]；x[-c(1:3)]
      2). 排序
  * sort()：输出排序后的结果
  * order()：输出排序后的各个向量位置


#### **矩阵** [matrix]

##### 矩阵创建

```R
matrix(data = NA, nrow = 1, ncol = 1, byrow = F, dimnames = list(Row_name, Col_name))
matrix(c[1:12], nrow = 3, ncol = 4, byrow = T, dimnames = list(paste0("a", c(1:2)), paste0("b", c(1:4))))
```

* data ：向量元素列表
* nrow：列数
* ncol：行数
* byrow：控制排列元素是优先按照行，先行后列
* dimnames：给定行和列名字


##### 矩阵运算

1). 行/列相关信息
* colnames(matrix1)：矩阵列名
* rownames(matrix1)：矩阵行名
* rownames(matrix1) <- c("a1", "a2")：给矩阵行命名
* dim(matrix1)：矩阵维度
* nrow(matrix1)：矩阵行数
* ncol(matrix1)：矩阵列数

2). 子矩阵
* 取某个元素：  matrix1[2, 3]
* 取某列元素：  matrix1[, 1]
* 取某行大于某个值 ： matrix1[matrix1[1, ] > 2,  ]

3). 矩阵基本运算
* 矩阵加减 
* 矩阵相乘

```R
> m1 <- matrix(1:20,nrow=5,ncol=4)
> m2 <- matrix(1:20,nrow=5,ncol=4)
m1 - m2 

> m1 %*% m2 
```

4). 矩阵转置： t(matrix1)

5). 其他运算
* diag()  :  取对角元素
* rowSums() : 行总和  [colSums]
* rowMeans() : 行均值  [colMeans]

##### 数据框 [data.frame]

data.frame函数可以创建数据框

```R
data.frame(vector..., row.names, check.rows, stringsAsFactors=default.stringsAsFactors())
> dat1 <- data.frame(x=paste0("a", c(1:3), y=paste0("b", c(4:6)), 
+ num=c(1, 2, 3))
```

**特点**

* 每个data.frame可以是不同类型向量的组合，而matrix只能是同一种类型向量
* data.frame的每一列的长度是一致的

1). 查看信息
* class(dat1) ：查看类型
* length(dat1)：查看数据框长度，列数
* names(dat1)：数据框各项名称
* summary(dat1)：数据框信息总结[最大小值， 中位数， 平均数， 分位数]
* unique(dat1)：去重复
* duplicated(dat1)： 取出重复行
* dat1[, 2]%in%c(3)：判断存在dat1[, 2]元素是否存在3

2). 取出元素
* dat1[i, j] : 第i行第j列
* dat1[1:i, ] : 第1到i行， 也可以用$获取某一列

3). 增加行和列
* . dat1$tmp <- c(11:12) : 增加tmp列， 列的行数和nrow(dat1)要一致
* . dat1 <- rbind(dat1, data.frame(x=2, y=3, z=5)) : 增加新行


#####  列表[list]

列表可以包含data.frame， matrix， vector等等元素，列表各列的长度可以不一致。

```R
> list1 <- list(dat = data.frame(x=c(1:3), y=c(4:6)), mat=matrix(c(1:12), nrow=3, ncol=4), vec=c(1:20))
> list1$dat  list1[[1]]
> list1$mat  list1[[2]]
> list$vec   list1[[3]]
```

* list1[1]和list1[[1]]的区别，前者是输出列表，后者是输出向量 
* list1[\[N]\]\[M] : 取N 列中的第M 个元素


##### 因子[factor]

factor(x,levels=) 把向量x编码称为因子 

```R
> factor(x = character(), levels, labels = levels,exclude = NA, 
       ordered = is.ordered(x))
```

* gl(n,k,lenth=n*k,labels=) ： 通过指定水平方式产生水平因子；k为水平的个数，n为重复的次数



### 数据对象

- 数值型（numeric）：实数，包括整数，小数和科学计数等；
- 逻辑型（logical）：T或者F；
- 字符型（character）：单引号或者双引号内内容；
- 复数型（complex）：a+bi，带有虚数部分；
- 原味型（raw）：以二进制形式保存数据；
- 缺省型（missing value）：NA。



### 引用

1. [153分钟学会R](https://cran.r-project.org/doc/contrib/Liu-FAQ.pdf)

参考文章如引起任何侵权问题，可以与我[联系](https://github.com/HuaZou/)，谢谢。
